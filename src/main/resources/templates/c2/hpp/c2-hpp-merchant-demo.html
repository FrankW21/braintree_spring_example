<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" type="text/css" href="/css/merchant.css" th:href="@{/css/merchant.css}" />
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"/>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</head>
<body>

<div class="formwrapper">
    <header>
        <div class="py-5 text-center">
            <h2>Example Merchant</h2>
            <p class="lead">
                Make a test payment with converge.
            </p>
        </div>
    </header>

    <form method="POST" action="/c2/hpp/c2-hpp-3ds-challenge" class="needs-validation" novalidate="true" id="paymentForm">
        <div class="mb-2">
            <label for="amount">Amount</label>
            <input id="amount" name="amount" class="form-control" type="tel" min="1" placeholder="" required="true" />
            <div class="invalid-feedback">
                Please enter a valid amount.
            </div>
        </div>

        <div class="mb-2">
            <label for="currency-code">Currency</label>
            <select class="custom-select d-block w-100" id="currency-code" name="currency-code">
                <option>EUR</option>
                <option>GBP</option>
            </select>
        </div>

        <hr class="mb-4"/>
        <button class="btn btn-primary" type="submit" id="purchasebtn"><span>Purchase</span></button>
    </form>
</div>

<script>

$( "#paymentForm" ).submit(function( event ) {
    var form = $("#paymentForm")[0];
    if (form.checkValidity() === true)
    {
        $('#purchasebtn').html('<span class="spinner-border spinner-border-sm mr-2" role="status" aria-hidden="true"></span>Loading...').addClass('disabled');
    }
});

// Example starter JavaScript for disabling form submissions if there are invalid fields
(function () {
  'use strict'

  window.addEventListener('load', function () {
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.getElementsByClassName('needs-validation')

    // Loop over them and prevent submission
    Array.prototype.filter.call(forms, function (form) {
      form.addEventListener('submit', function (event) {
        if (form.checkValidity() === false) {
          event.preventDefault()
          event.stopPropagation()
        }
        form.classList.add('was-validated')
      }, false)
    })
  }, false)
}())


</script>


</body>
</html>
